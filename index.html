<!DOCTYPE html>
<html>
  <head>
    <meta name="generator"
    content="HTML Tidy for HTML5 (experimental) for Windows https://github.com/w3c/tidy-html5/tree/c63cc39" />
    <title>Invitation Generator | forsale.id</title>
    <link rel="stylesheet" type="text/css" href="styles/theme.css" />
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <meta content="utf-8" http-equiv="encoding" />
	
	<!-- google font -->
	<link href="https://fonts.googleapis.com/css?family=Parisienne" rel="stylesheet"> 
	
	
  </head>
  <body>
  <h1>Invitation Generator</h1>
  <span class="note">Fill up the informations and download your banner:</span>
  <br />
  <br />
  <div class="form">
  <input type="text" id="banner_heading" placeholder="Wida dan Isa" /> 
  <input type="text" id="banner_subheading" placeholder="Kamis, 17 Agustus 2017" /> 
  <input type="button" id="preview" value="Apply Text" /> 
  <a id="download">
    <button type="button">Download</button>
  </a></div>
  <canvas id="banner_background" height="946px" width="1004px"></canvas> 
  <canvas id="banner" height="946px" width="1004px"></canvas> 
  <script>
 
        
//lets set the maximum length for the headline.
document.getElementById("banner_heading").setAttribute("maxlength", "32");
document.getElementById("banner_subheading").setAttribute("maxlength", "32");
//now taking care of the canvases. firstly the background layer;
var background = document.getElementById("banner_background");
background_ctx = background.getContext("2d");
//now the text layer;
var textLayer = document.getElementById("banner");
textLayer_ctx = textLayer.getContext("2d");
//lets create an image element;
var backgroundImage = new Image(background.width, background.height);
backgroundImage.src = '20231-NSLTKO.png';
//function that generates the banner preview from user input text;
function previewBanner() {
  background_ctx.clearRect(0, 0, background.width, background.height); //      Clearing both layers
  textLayer_ctx.clearRect(0, 0, textLayer.width, textLayer.height);  //           before preview
  background_ctx.drawImage(backgroundImage, 0, 0, background.width, background.height);
  textLayer_ctx.textAlign = "center";
  textLayer_ctx.font = "300 350% Parisienne";
  textLayer_ctx.fillText(document.getElementById("banner_heading").value, textLayer.width/2, textLayer.height/1.65);
  textLayer_ctx.font = "300 200% Open Sans";
  textLayer_ctx.fillText(document.getElementById("banner_subheading").value, textLayer.width/2, textLayer.height/1.5);
  //now drwaing the textLayer canvas into the background canvas
  background_ctx.drawImage(textLayer, 0, 0, background.width, background.height);
}
//Will it look good to lead the canvas totally white? Nope, show some default banner background;
window.addEventListener("load", function(){
  background_ctx.drawImage(backgroundImage, 0, 0, background.width, background.height);
});
//Calling the friendly previewBanner function;
var preview = document.getElementById("preview");
preview.addEventListener("click", previewBanner);

//function that downloads the previously generated banner;
function downloadImage(link, canvasID, fileName) {
  link.href = canvasID.toDataURL('image/png'+'==');
  link.download = fileName;
}

var downloadButton = document.getElementById("download");
downloadButton.addEventListener("click", function(){
  previewBanner(); //downloading gets the exact current state by this;
  downloadImage(this, background, "foraleID-digital-invitation.png");
});

        
        
        
</script></body>
</html>
