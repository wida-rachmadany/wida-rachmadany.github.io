<!DOCTYPE html>
<html>

<head>
    <meta name="generator" content="HTML Tidy for HTML5 (experimental) for Windows https://github.com/w3c/tidy-html5/tree/c63cc39" />
    <title>Invitation Generator | forsale.id</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <meta content="utf-8" http-equiv="encoding" />
    <!-- google font -->
    <link href="https://fonts.googleapis.com/css?family=Parisienne" rel="stylesheet" />
    <!-- bulma.io - css ramework -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.5.1/css/bulma.min.css" />
    <!-- stylesheet -->
    <style>
        /*
  Importing fonts
*/
        
        @import 'https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i';
        canvas {
            width: 100%;
        }
        
        #banner_background {
            z-index: 0;
        }
        
        #banner {
            z-index: 1;
            display: none;
        }
    </style>
</head>

<body>

    <nav class="navbar">
        <div class="navbar-brand">
            <a class="navbar-item" href="http://forsale.id"><i class="fa fa-home fa-fw" aria-hidden="true"></i>&nbsp;FORSALE.ID
            </a>

            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <section class="hero is-primary">
        <div class="hero-body">
            <div class="container">
                <h1 class="title">Invitation Generator</h1>
                <h2 class="subtitle">Fill up the informations and download your invitation</h2>
            </div>
        </div>
    </section>

    <section class="hero">
        <div class="hero-body">
            <div class="container">
                <div class="columns">
                    <div class="column is-4">
                        <h1 class="title">Input Data</h1>
                        <div class="field">
							<label class="label">Nama Mempelai</label>
                            <div class="control">
                                <input class="input is-medium" type="text" id="banner_heading" placeholder="Wida dan Isa" />
                            </div>
							<p class="help">Contoh: Wida & Ninik</p>
                        </div>
                        <div class="field">
							<label class="label">Waktu Resepsi</label>
                            <div class="control">
                                <input class="input is-medium" type="text" id="banner_subheading" placeholder="Kamis, 17 Agustus 2017" />
                            </div>
							<p class="help">Contoh: Kamis, 17 Agustus 2017</p>
                        </div>
						<div class="field">
							<label class="label">Lokasi Resepsi</label>
                            <div class="control">
                                <textarea class="textarea is-medium" placeholder="Textarea" id="banner_subheading1"></textarea>
                            </div>
							<p class="help">Contoh: Gedung Merdeka, Jl. Kebangsaan 99, Surabaya</p>
                        </div>
                        <input type="button" id="preview" value="Apply Text" class="button is-primary" />
                        <a id="download">
                            <button type="button" class="button is-success">Download</button>
                        </a>
                    </div>
                    <div class="column">
                        <h1 class="title">Preview Pane</h1>
                        <canvas id="banner_background" height="946px" width="1004px"></canvas>
                        <canvas id="banner" height="946px" width="1004px"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        //lets set the maximum length for the headline.
        document.getElementById("banner_heading").setAttribute("maxlength", "32");
        document.getElementById("banner_subheading").setAttribute("maxlength", "40");
        document.getElementById("banner_subheading1").setAttribute("maxlength", "45");
        //now taking care of the canvases. firstly the background layer;
        var background = document.getElementById("banner_background");
        background_ctx = background.getContext("2d");
        //now the text layer;
        var textLayer = document.getElementById("banner");
        textLayer_ctx = textLayer.getContext("2d");
        //lets create an image element;
        var backgroundImage = new Image(background.width, background.height);
        backgroundImage.src = '20231-NSLTKO.png';
        //function that generates the banner preview from user input text;
        function previewBanner() {
            background_ctx.clearRect(0, 0, background.width, background.height); //      Clearing both layers
            textLayer_ctx.clearRect(0, 0, textLayer.width, textLayer.height); //           before preview
            background_ctx.drawImage(backgroundImage, 0, 0, background.width, background.height);
            textLayer_ctx.textAlign = "center";
            textLayer_ctx.font = "300 350% Parisienne";
            textLayer_ctx.fillText(document.getElementById("banner_heading").value, textLayer.width / 2, textLayer.height / 1.65);
            textLayer_ctx.font = "300 200% Open Sans";
            textLayer_ctx.fillText(document.getElementById("banner_subheading").value, textLayer.width / 2, textLayer.height / 1.5);
            textLayer_ctx.font = "300 200% Open Sans";
            textLayer_ctx.fillText(document.getElementById("banner_subheading1").value, textLayer.width / 2, textLayer.height / 1.4);
            //now drwaing the textLayer canvas into the background canvas
            background_ctx.drawImage(textLayer, 0, 0, background.width, background.height);
        }
        //Will it look good to lead the canvas totally white? Nope, show some default banner background;
        window.addEventListener("load", function() {
            background_ctx.drawImage(backgroundImage, 0, 0, background.width, background.height);
        });
        //Calling the friendly previewBanner function;
        var preview = document.getElementById("preview");
        preview.addEventListener("click", previewBanner);

        //function that downloads the previously generated banner;
        function downloadImage(link, canvasID, fileName) {
            link.href = canvasID.toDataURL('image/png' + '==');
            link.download = fileName;
        }

        var downloadButton = document.getElementById("download");
        downloadButton.addEventListener("click", function() {
            previewBanner(); //downloading gets the exact current state by this;
            downloadImage(this, background, "forsaleID-digital-invitation.png");
        });
		
			
    </script>
</body>

</html>
